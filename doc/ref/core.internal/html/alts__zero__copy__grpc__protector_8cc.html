<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GRPC Core: src/core/tsi/alts/zero_copy_frame_protector/alts_zero_copy_grpc_protector.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GRPC Core
   &#160;<span id="projectnumber">12.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li><li class="navelem"><a class="el" href="dir_99f60d2bb6231896bcd2887028065f74.html">tsi</a></li><li class="navelem"><a class="el" href="dir_4d2f87c9b5d40e0b1bb096b914a12d23.html">alts</a></li><li class="navelem"><a class="el" href="dir_743ccaac2fa1d140bfb359d5b482bd84.html">zero_copy_frame_protector</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">alts_zero_copy_grpc_protector.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="support_2port__platform_8h_source.html">grpc/support/port_platform.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="alts__zero__copy__grpc__protector_8h_source.html">src/core/tsi/alts/zero_copy_frame_protector/alts_zero_copy_grpc_protector.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="include_2grpc_2support_2alloc_8h_source.html">grpc/support/alloc.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="support_2log_8h_source.html">grpc/support/log.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="useful_8h_source.html">src/core/lib/gpr/useful.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="exec__ctx_8h_source.html">src/core/lib/iomgr/exec_ctx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="slice__internal_8h_source.html">src/core/lib/slice/slice_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="gsec_8h_source.html">src/core/tsi/alts/crypt/gsec.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="alts__grpc__integrity__only__record__protocol_8h_source.html">src/core/tsi/alts/zero_copy_frame_protector/alts_grpc_integrity_only_record_protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="alts__grpc__privacy__integrity__record__protocol_8h_source.html">src/core/tsi/alts/zero_copy_frame_protector/alts_grpc_privacy_integrity_record_protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="alts__grpc__record__protocol_8h_source.html">src/core/tsi/alts/zero_copy_frame_protector/alts_grpc_record_protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="alts__iovec__record__protocol_8h_source.html">src/core/tsi/alts/zero_copy_frame_protector/alts_iovec_record_protocol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="transport__security__grpc_8h_source.html">src/core/tsi/transport_security_grpc.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structalts__zero__copy__grpc__protector.html">alts_zero_copy_grpc_protector</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main struct for <a class="el" href="structalts__zero__copy__grpc__protector.html" title="Main struct for alts_zero_copy_grpc_protector.">alts_zero_copy_grpc_protector</a>.  <a href="structalts__zero__copy__grpc__protector.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a97776f9ec9ed9b4e560daf814abddb56"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structalts__zero__copy__grpc__protector.html">alts_zero_copy_grpc_protector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alts__zero__copy__grpc__protector_8cc.html#a97776f9ec9ed9b4e560daf814abddb56">alts_zero_copy_grpc_protector</a></td></tr>
<tr class="memdesc:a97776f9ec9ed9b4e560daf814abddb56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main struct for <a class="el" href="structalts__zero__copy__grpc__protector.html" title="Main struct for alts_zero_copy_grpc_protector.">alts_zero_copy_grpc_protector</a>.  <a href="alts__zero__copy__grpc__protector_8cc.html#a97776f9ec9ed9b4e560daf814abddb56">More...</a><br /></td></tr>
<tr class="separator:a97776f9ec9ed9b4e560daf814abddb56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aab1de4a1bd602792ee42c728aa65e569"><td class="memItemLeft" align="right" valign="top"><a class="el" href="transport__security__interface_8h.html#a368f59529aaab1dab4d117adfabcb468">tsi_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alts__zero__copy__grpc__protector_8cc.html#aab1de4a1bd602792ee42c728aa65e569">alts_zero_copy_grpc_protector_create</a> (const uint8_t *key, size_t key_size, bool is_rekey, bool is_client, bool is_integrity_only, bool enable_extra_copy, size_t *max_protected_frame_size, <a class="el" href="structtsi__zero__copy__grpc__protector.html">tsi_zero_copy_grpc_protector</a> **protector)</td></tr>
<tr class="memdesc:aab1de4a1bd602792ee42c728aa65e569"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method creates an ALTS zero-copy grpc protector.  <a href="alts__zero__copy__grpc__protector_8cc.html#aab1de4a1bd602792ee42c728aa65e569">More...</a><br /></td></tr>
<tr class="separator:aab1de4a1bd602792ee42c728aa65e569"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a12655e3a51a4390bd916114ed6a47ae5"><td class="memItemLeft" align="right" valign="top">constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alts__zero__copy__grpc__protector_8cc.html#a12655e3a51a4390bd916114ed6a47ae5">kMinFrameLength</a> = 1024</td></tr>
<tr class="separator:a12655e3a51a4390bd916114ed6a47ae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f169224561bdea1813c3de11aba8b9b"><td class="memItemLeft" align="right" valign="top">constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alts__zero__copy__grpc__protector_8cc.html#a3f169224561bdea1813c3de11aba8b9b">kDefaultFrameLength</a> = 16 * 1024</td></tr>
<tr class="separator:a3f169224561bdea1813c3de11aba8b9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0f25ba8dc5a243fc626a2ecaa9d80e"><td class="memItemLeft" align="right" valign="top">constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="alts__zero__copy__grpc__protector_8cc.html#abc0f25ba8dc5a243fc626a2ecaa9d80e">kMaxFrameLength</a> = 16 * 1024 * 1024</td></tr>
<tr class="separator:abc0f25ba8dc5a243fc626a2ecaa9d80e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a97776f9ec9ed9b4e560daf814abddb56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97776f9ec9ed9b4e560daf814abddb56">&#9670;&nbsp;</a></span>alts_zero_copy_grpc_protector</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structalts__zero__copy__grpc__protector.html">alts_zero_copy_grpc_protector</a> <a class="el" href="structalts__zero__copy__grpc__protector.html">alts_zero_copy_grpc_protector</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main struct for <a class="el" href="structalts__zero__copy__grpc__protector.html" title="Main struct for alts_zero_copy_grpc_protector.">alts_zero_copy_grpc_protector</a>. </p>
<p>We choose to have two <a class="el" href="structalts__grpc__record__protocol.html">alts_grpc_record_protocol</a> objects and two sets of slice buffers: one for protect and the other for unprotect, so that protect and unprotect can be executed in parallel. Implementations of this object must be thread compatible. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aab1de4a1bd602792ee42c728aa65e569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab1de4a1bd602792ee42c728aa65e569">&#9670;&nbsp;</a></span>alts_zero_copy_grpc_protector_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="transport__security__interface_8h.html#a368f59529aaab1dab4d117adfabcb468">tsi_result</a> alts_zero_copy_grpc_protector_create </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>key_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_rekey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_integrity_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable_extra_copy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>max_protected_frame_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtsi__zero__copy__grpc__protector.html">tsi_zero_copy_grpc_protector</a> **&#160;</td>
          <td class="paramname"><em>protector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method creates an ALTS zero-copy grpc protector. </p>
<ul>
<li>key: a symmetric key used to seal/unseal frames.</li>
<li>key_size: the size of symmetric key.</li>
<li>is_rekey: use rekeying AEAD crypter.</li>
<li>is_client: a flag indicating if the protector will be used at client or server side.</li>
<li>is_integrity_only: a flag indicating if the protector instance will be used for integrity-only or privacy-integrity mode.</li>
<li>enable_extra_copy: a flag indicating if the protector instance does one extra memory copy during the protect operation for integrity_only mode. For the unprotect operation, it is still zero-copy. If application intends to modify the data buffer after the protect operation, we can turn on this mode to avoid integrity check failure.</li>
<li>max_protected_frame_size: an in/out parameter indicating max frame size to be used by the protector. If it is nullptr, the default frame size will be used. Otherwise, the provided frame size will be adjusted (if not falling into a valid frame range) and used.</li>
<li>protector: a pointer to the zero-copy protector returned from the method.</li>
</ul>
<p>This method returns TSI_OK on success or a specific error code otherwise. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a3f169224561bdea1813c3de11aba8b9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f169224561bdea1813c3de11aba8b9b">&#9670;&nbsp;</a></span>kDefaultFrameLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t kDefaultFrameLength = 16 * 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abc0f25ba8dc5a243fc626a2ecaa9d80e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0f25ba8dc5a243fc626a2ecaa9d80e">&#9670;&nbsp;</a></span>kMaxFrameLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t kMaxFrameLength = 16 * 1024 * 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a12655e3a51a4390bd916114ed6a47ae5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12655e3a51a4390bd916114ed6a47ae5">&#9670;&nbsp;</a></span>kMinFrameLength</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t kMinFrameLength = 1024</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 14 2020 14:34:16 for GRPC Core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
